#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#  Configuration file 
#  author: guillaume.aubert@ctbto.org
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#  Name : DatabaseAccess
#  Info : Connection Configuration Database
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[DatabaseAccess]
# jdbc driver 
driverClassName=oracle.jdbc.driver.OracleDriver
# jdbc url (should be something like jdbc:mysql://localhost:3306/vmc)
url=jdbc:oracle:thin:@orac1.ctbto.org:1521/IDCDEV.CTBTO.ORG
# uid
uid=centre
# password
password=data

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#  Name : TemplatingSystem
#  Info : Information for the XML templating engine
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[TemplatingSystem]
# Base Template to load
baseTemplate=/home/aubert/ecmwf/workspace/RNpicker/etc/ext/SAMPMLTemplate.xml
particulateSpectrumTemplate=/home/aubert/ecmwf/workspace/RNpicker/etc/ext/SAMPMLSpectrumTemplate.xml

#do not modify formatting
particulateCategoryTemplate=
	 <CategoryInformation> 
        <Category>${CATEGORY}</Category>
        <Nuclide>${CATEGORY_NUCLIDE}</Nuclide>
        <CategoryComment>${CATEGORY_COMMENT}</CategoryComment> 
     </CategoryInformation>

particulateNonQuantifiedTemplate=
    <Nuclide>
		<Name>${NAME}</Name>
		<Type>${TYPE}</Type>
	</Nuclide>
	
particulateQuantifiedTemplate=
   <Nuclide>
		<Name>${NAME}</Name>
		<Type>${TYPE}</Type>
		<HalfLife>${HALFLIFE}</HalfLife>
		<Concentration unit="uBq/m3">${CONCENTRATION}</Concentration>
		<ConcentrationError unit="percentage">${CONCENTRATION_ERROR}</ConcentrationError>
	</Nuclide>
	
particulateMDATemplate=
	<Nuclide>
		<Name>${NAME}</Name>
		<HalfLife>${HALFLIFE}</HalfLife>
	    <MDA unit="uBq/m3">${MDA}</MDA>
	</Nuclide>
	
peaksTemplate=
    <PeakResult>
		<Energy>${ENERGY}</Energy>
		<Centroid>${CENTROID}</Centroid>
		<Area>${AREA}</Area>
		<Width>${WIDTH}</Width>
		<FWHM>${FWHM}</FWHM>
		<BackgroundCounts>${BACKGROUNDCOUNTS}</BackgroundCounts>
		<Efficiency>${EFFICIENCY}</Efficiency>
		<LC>${LC}</LC>
		<LD>${LD}</LD>
		<Detectibility>${DETECTIBILITY}</Detectibility>
		<IdentifiedNuclide percentage="${NUCLIDE_PERCENTAGE}">${NUCLIDE}</IdentifiedNuclide>
	</PeakResult>
	
processingParametersTemplate=
           <ProcessingParameters software="${SOFTWARE}" method="${METHOD}" version="${VERSION}">
				<Threshold>${THRESHOLD}</Threshold>
				<PeakStart unit="keV">${PEAK_START}</PeakStart>
				<PeakEnd unit="keV">${PEAK_END}</PeakEnd>
				<LeftFWHMLimit>${LEFT_FWHM}</LeftFWHMLimit>
				<RightFWHMLimit>${RIGHT_FWHM}</RightFWHMLimit>
				<MutlipletFWHMLimit>${MULTI_FWHM}</MutlipletFWHMLimit>
				<FitSinglets>${FIT_SINGLETS}</FitSinglets>
				<CriticalLevelTest>${CRITICAL_LEV_TEST}</CriticalLevelTest>
				<EstimatePeakWidths>${ESTIMATED_PEAK_WIDTHS}</EstimatePeakWidths>
				<BaselineType>${BASELINE_TYPE}</BaselineType>
				<BaselineChannels>${BASELINE_CHANNELS}</BaselineChannels>
				<PerformSubstraction>${SUBSTRACTION}</PerformSubstraction>
				<EnergyTolerance>${ENERGY_TOLERANCE}</EnergyTolerance>
				<ConfidenceThreshold>${CONFIDENCE_THRESHOLD}</ConfidenceThreshold>
				<RiskLevel unit="percentage">${RISK_LEVEL}</RiskLevel>
			</ProcessingParameters>

updateParametersTemplate=
            <UpdateParameters software="${SOFTWARE}" method="${METHOD}" version="${VERSION}">
				<UseMRP>${USE_MRP}</UseMRP>
				<MRPSampleID>${MRP_SAMPLEID}</MRPSampleID>
				<GainShift unit="percentage">${GAIN_SHIFT}</GainShift>
				<ZeroShift>${ZERO_SHIFT}</ZeroShift>
				<AreaLimit>${AREA_LIMIT}</AreaLimit>
				<UseWeight>${USE_WEIGHT}</UseWeight>
				<UseMultiplet>${USE_MULTIPLET}</UseMultiplet>
				<ForceLinear>${FORCE_LINEAR}</ForceLinear>
				<IgnorePreviousECR>${IGNORE_PREVIOUS_ECR}</IgnorePreviousECR>
				<MinimumLibLookupTolerance>${MINIMUM_LIB_LOOKUP_TOLERANCE}</MinimumLibLookupTolerance>
				<RERIntercept>${RER_INTERCEPT}</RERIntercept>
				<RERSlope>${RER_SLOPE}</RERSlope>
				<ECRSlope>${ECR_SLOPE}</ECRSlope>
				<DoResolutionUpdate>${DO_RESOLUTION_UPDATE}</DoResolutionUpdate>
			</UpdateParameters>

timelinessFlagsTemplate =
           <TimelinessAndAvailabilityFlags>
				<PreviousSamplePresent>${PreviousSamplePresent}</PreviousSamplePresent>
				<CollectionTimeWithin24Hrs>${CollectionTime}</CollectionTimeWithin24Hrs>
				<AcquisitionTimeGTE20Hrs>${AcquisitionTime}</AcquisitionTimeGTE20Hrs>
				<DecayTimeLTE24Hrs>${DecayTime}</DecayTimeLTE24Hrs>
				<SampleReceived72HrsFromCollectStart>${SampleReceived}</SampleReceived72HrsFromCollectStart>
			</TimelinessAndAvailabilityFlags>
			
dataQualityFlagsTemplate =
             <DataQualityFlags>
				<Ba140MDC>
					<Value>${Ba140_MDC_VAL}</Value>
					<Pass>${Ba140_MDC_PASS}</Pass>
					<Test>lower than ${Ba140_MDC_THRESOLD}</Test>
				</Ba140MDC>
				<K40LocationDifference>
					<Value>${K40_LocationDifference_VAL}</Value>
					<Pass>${K40_LocationDifference_PASS}</Pass>
					<Test>lower than 3 * std deviation</Test>
				</K40LocationDifference>
				<NormalizedGainDifference>
					<Value>${NormalizedGainDifference_VAL}</Value>
					<Pass>${NormalizedGainDifference_PASS}</Pass>
					<Test>lower than ${NormalizedGainDifference_THRESOLD}</Test>
				</NormalizedGainDifference>
				<Be7FWHM>
					<Value>${Be7_FWHM_VAL}</Value>
					<Pass>${Be7_FWHM_PASS}</Pass>
					<Test>lower than ${Be7_FWHM_THRESOLD}</Test>
				</Be7FWHM>
				<FlowRate>
					<Value>${FlowRate_VAL}</Value>
					<Pass>${FlowRate_PASS}</Pass>
					<Test>greater than ${FlowRate_THRESOLD}</Test>
				</FlowRate>
			</DataQualityFlags>
			
eventScreeningFlagsTemplate =
			<EventScreeningFlags>
				<ActivationProductsPresent>true</ActivationProductsPresent>
				<NbOfDaysSinceLastActivationProduct>48.9999</NbOfDaysSinceLastActivationProduct>
				<OnlyOneFissionProductPresent>false</OnlyOneFissionProductPresent>
				<TwoOrMoreFissionProductsPresent>false</TwoOrMoreFissionProductsPresent>
				<CS-137Present>false</CS-137Present>
			</EventScreeningFlags>


#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#  Name : FileSystem
#  Info : IDC FileSystem info
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
dataRootDir=/home/misc/rmsops/data

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#  Name : RawDBRenderer
#  Info : Connection Configuration Database
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[RawDBRenderer]
static_tables=RMSAUTO.GARDS_STATIONS, RMSAUTO.FPDESCRIPTION
#dynamic_tables=RMSAUTO.GARDS_SAMPLE_DATA, RMSAUTO.GARDS_SPECTRUM, RMSAUTO.GARDS_SAMPLE_AUX
dynamic_tables=RMSAUTO.GARDS_SAMPLE_DATA, RMSAUTO.GARDS_USER_COMMENTS, RMSAUTO.GARDS_SPECTRUM, RMSAUTO.GARDS_SAMPLE_AUX, RMSAUTO.GARDS_SAMPLE_DESCRIPTION, RMSAUTO.GARDS_SAMPLE_FLAGS, RMSAUTO.GARDS_SAMPLE_CERT, RMSAUTO.GARDS_SAMPLE_CERT_LINES, RMSAUTO.GARDS_SAMPLE_PROC_PARAMS, RMSAUTO.GARDS_SAMPLE_RATIOS, RMSAUTO.GARDS_SAMPLE_STATUS, RMSAUTO.GARDS_SAMPLE_UPDATE_PARAMS, RMSAUTO.GARDS_COMMENTS, RMSAUTO.GARDS_EFFICIENCY_CAL, RMSAUTO.GARDS_EFFICIENCY_PAIRS , RMSAUTO.GARDS_ENERGY_CAL, RMSAUTO.GARDS_ENERGY_CAL_COV, RMSAUTO.GARDS_ENERGY_CAL_ORIG, RMSAUTO.GARDS_ENERGY_PAIRS, RMSAUTO.GARDS_ENERGY_PAIRS_ORIG, RMSAUTO.GARDS_HISTOGRAM, RMSAUTO.GARDS_NUCL_IDED,RMSAUTO.GARDS_NUCL_IDED_ORIG,RMSAUTO.GARDS_NUCL_LINES_IDED,RMSAUTO.GARDS_PEAKS,RMSAUTO.GARDS_PEAKS_ORIG,RMSAUTO.GARDS_QC_RESULTS,RMSAUTO.GARDS_RESOLUTION_CAL,RMSAUTO.GARDS_RESOLUTION_CAL_COV,RMSAUTO.GARDS_RESOLUTION_PAIRS, RMSAUTO.GARDS_ROI_CHANNELS
# remove RMSAUTO.GARDS_ROI_LIMITS which hasn't got any indexes , GARDS_SAMPLE_RATIOS hasn't got any as well
#limits=RMSAUTO.GARDS_STATIONS:4
extractionDir=/tmp/DB-Extract